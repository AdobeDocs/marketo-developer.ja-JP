---
title: カスタムサービス
feature: REST API
description: Marketo カスタムサービスを作成し、API のみの役割と権限を設定し、LaunchPoint でクライアント ID とクライアント秘密鍵を取得し、アクセストークンを取得します。
exl-id: 38b05c4c-4404-4c30-a7cb-d31b28a3a72e
source-git-commit: 7557b9957c87f63c2646be13842ea450035792be
workflow-type: tm+mt
source-wordcount: '1002'
ht-degree: 97%

---

# カスタムサービス

カスタムサービスは、Marketo で認証する資格情報を提供します。Marketo [ID サービス](https://developer.adobe.com/marketo-apis/api/identity/#tag/Identity/operation/identityUsingGET)からアクセストークンを取得するには、資格情報が必要です。各カスタムサービスは、権限の派生元である単一の API のみのユーザにスコープされます。

## ロール

カスタムサービスを作成する最初の手順は、関連する API のみのユーザに適用できるロールを作成することです。これは、**[!UICONTROL 管理]**／**[!UICONTROL ユーザ＆ロール]**／**[!UICONTROL ロール]**&#x200B;メニューから実行します。

ロールは、特定の機能へのアクセスを許可または制限する個別の権限のコンテナです。ワークスペースとパーティションが有効なサブスクリプションでは、ワークスペースごとに権限が付与されます。ユーザが 1 つのワークスペースでは権限を持っているが、別のワークスペースでは権限を持っていない場合、そのワークスペースで許可されたアクションのみを実行できます。ロールを作成するには、「新しいロール」ボタンをクリックします。

![ユーザとロール](assets/admin-users-and-roles-roles.png)

ロールにはわかりやすい名前を付けます。API のみのユーザには、通常のユーザ権限とは別の、異なる特定の権限セットが付与されます。API 権限は、「API にアクセス」ツリーの下にある独自の階層に存在します。

![新規ロール権限](assets/new-role-access-api-permissions.png)

### ロール権限

「API にアクセス」グループの権限のみが API ユーザに適用されます。つまり、すべての管理者権限を付与しても、ユーザに API 権限は付与されません。

ロールを構築する際は、このロールを使用するアプリケーションにどのようなアクションを許可するかを慎重に考慮します。これらのアクションの実行に必要な最小限の権限セットのみが付与されます。不必要に許容度の高い権限セットを許可すると、統合によりサブスクリプションで不要なアクションが実行される場合があります。[権限](endpoint-reference.md)ツールを使用して、最小限の権限セットを決定できます。詳しくは、[権限](#permission_list)の完全なリストを参照してください。

## ユーザ

ロールを作成したら、「API のみ」のユーザを作成する必要があります。API のみのユーザは、Marketo の特別なタイプのユーザで、他のユーザによって管理されるので、Marketo へのログインには使用できません。API のみのユーザは、次を実行できます。

- カスタムサービスを作成
- これらのサービスの権限をスコープ
- REST API にアクセス

>[!MORELIKETHIS]
>
>API のみのユーザを作成するには、**[!UICONTROL 管理]**／**[!UICONTROL ユーザ＆ロール]**／**[!UICONTROL ユーザ]**&#x200B;メニューに移動し、「[!UICONTROL 新規ユーザを招待]」をクリックします。

![新規ユーザ情報](assets/new-user-info.png)

ユーザが使用するサービスとアプリケーションに基づいて、ユーザにわかりやすい名前とメールアドレス（有効である必要はありません）を指定します。ダイアログメニューの必須フィールドに入力し、「API のみ」チェックボックスをオンにして、ユーザに API ロールの 1 つを付与します。これにより、そのロールの権限セットがユーザに割り当てられます。

![新規ユーザー権限](assets/new-user-permissions.png)

最後に、「送信」をクリックして API のみのユーザを作成します。

資格情報を使用して新しいアプリケーションをプロビジョニングする際は、別の既存の統合と同じ権限セットを持っている場合でも、サービスの新しいユーザを作成することを強く考慮します。API 呼び出しの使用状況の統計とエラーはユーザごとに追跡されるので、アプリケーションごとにユーザをプロビジョニングすると、使用状況と問題を特定のアプリケーションに分離するのに役立ちます。これは、毎日の API 呼び出し制限に達した場合や、統合により行われた API 呼び出しによってエラーが発生した場合に役立ちます。

## カスタムサービス

カスタムサービスは、Marketo インスタンスで認証を実行するのに必要な実際の資格情報、クライアント ID およびクライアント秘密鍵を提供します。プロビジョニングするには、**[!UICONTROL 管理]**／**[!UICONTROL 統合]**／**[!UICONTROL Launchpoint]** メニューに移動し、「**[!UICONTROL 新規サービス]**」を選択します。

サービスにわかりやすい名前を付け、「サービス」リストから「カスタム」を選択します。サービスに詳細な説明を入力し、「API のみのユーザ」リストから適切なユーザを選択して、「[!UICONTROL 作成]」をクリックします。

![新規カスタムサービス](assets/admin-launchpoint-new-service.png)

これにより、Launchpoint サービスのリストに新しいサービスが追加され、「詳細を表示」にオプションが追加されます。「詳細を表示」をクリックすると、認証に必要なクライアント ID とクライアント秘密鍵、所有ユーザ、短期テストの目的でトークンを取得するオプションが表示されます。このダイアログから取得するトークンの有効期間は、[ID サービス](https://developer.adobe.com/marketo-apis/api/identity/#tag/Identity/operation/identityUsingGET)から通常取得されるトークンと同じで、作成から 3,600 秒間有効です。

![トークンを取得](assets/get-token.png)

## ワークスペースとパーティション

ワークスペースとパーティションを含むサブスクリプションでは、特定のワークスペースでのユーザのロールの権限に基づいて、特定のレコードまたはアセットにアクセスする権限が付与されます。各ワークスペースには、ワークスペースとパーティションメニュー内の 1 つ以上のパーティションへのアクセス権が付与され、リードは単一のパーティションに属します。API のみのユーザがワークスペース内のリードレコードの読み取りまたは書き込みのアクセス権を持っている場合、そのワークスペースがアクセスできるパーティション内のすべてのレコードにアクセスできます。

アセットはワークスペースに属しているので、アセットの読み取りまたは書き込みができるかどうかは、ユーザが関連するワークスペース内でこのタイプのアセットレコードの読み取りまたは書き込み権限を持つロールを持っているかどうかによって決まります。

## 権限リスト

API のみのユーザが使用できるすべての権限と、その権限を持つユーザに許可される操作のリストを以下に示します。

| ロール権限 | アクセス権の付与対象… |
| --- | --- |
| アセットを承認 | アセットを承認 |
| キャンペーンを実行 | キャンペーンをリクエストまたはスケジュール |
| 読み取り専用アクティビティ | リードアクティビティを取得 |
| 読み取り専用アクティビティメタデータ | リードアクティビティメタデータを取得 |
| 読み取り専用アセット | アセットの詳細を取得 |
| 読み取り専用キャンペーン | キャンペーンの詳細を取得 |
| 読み取り専用会社 | 会社の詳細を取得 |
| 読み取り専用カスタムオブジェクト | カスタムオブジェクトの詳細を取得 |
| 読み取り専用リード | リードの詳細を取得 |
| 読み取り専用名前付きアカウント | 重点顧客の詳細を取得 |
| 読み取り専用名前付きアカウントリスト | 重点顧客リストの詳細を取得 |
| 読み取り専用商談 | 商談の詳細を取得 |
| 読み取り専用セールス担当者 | セールス担当者の詳細を取得 |
| 読み取り／書き込みアクティビティ | リードアクティビティを取得および作成 |
| 読み取り／書き込みアクティビティメタデータ | リードアクティビティメタデータを取得および作成 |
| 読み取り／書き込みアセット | アセットを取得、作成、更新 |
| 読み取り／書き込みキャンペーン | キャンペーンを取得、作成、更新 |
| 読み取り／書き込み会社 | 会社を取得、作成、更新 |
| 読み取り／書き込みカスタムオブジェクト | カスタムオブジェクトを取得、作成、更新 |
| 読み取り／書き込みリード | リードの詳細を取得、作成、更新 |
| 読み取り／書き込み名前付きアカウント | 重点顧客を取得、作成、更新 |
| 読み取り／書き込み名前付きアカウントリスト | 重点顧客リストを取得、作成、更新 |
| 読み取り／書き込み商談 | 商談を取得、作成、更新 |
| 読み取り／書き込みセールス担当者 | セールス担当者を取得、作成、更新 |
