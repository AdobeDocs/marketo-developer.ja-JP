---
title: "カスタムサービス"
feature: REST API
description: 「Marketoとの認証資格情報」
source-git-commit: 2185972a272b64908d6aac8818641af07c807ac2
workflow-type: tm+mt
source-wordcount: '985'
ht-degree: 6%

---


# カスタムサービス

カスタムサービスは、Marketoで認証するための資格情報を提供します。 Marketoからアクセストークンを取得するには、資格情報が必要です [ID サービス](https://developer.adobe.com/marketo-apis/api/identity/#tag/Identity/operation/identityUsingGET). 各カスタムサービスは、権限の派生元である単一の API 専用ユーザーにスコープ設定されます。

## ロール

カスタムサービスを作成する最初の手順は、関連する API 専用ユーザーに適用できる役割を作成することです。 これは、 **[!UICONTROL Admin]** > **[!UICONTROL ユーザーと役割]** > **[!UICONTROL 役割]** メニュー。

役割は、特定の機能へのアクセスを許可または制限する個々の権限のコンテナです。 ワークスペースとパーティションが有効になっているサブスクリプションでは、権限はワークスペースごとに付与されます。 あるワークスペースに権限を持っているが別のワークスペースには権限を持っていないユーザーは、そのワークスペースで許可されたアクションのみを実行できます。 役割を作成するには、「新しい役割」ボタンをクリックします。

![ユーザとロール](assets/admin-users-and-roles-roles.png)

役割にはわかりやすい名前を付けてください。 API のみのユーザーには、通常のユーザー権限とは別の特別な権限セットがあります。 API 権限は、「Access API」ツリーの下の独自の階層に存在します。

![新しい役割の権限](assets/new-role-access-api-permissions.png)

### 役割の権限

API ユーザーには「アクセス API」グループの権限のみが適用されます。つまり、すべての管理者権限を付与しても、API 権限はユーザーに付与されません。

役割を構築する際は、それを使用したアプリケーションにどのようなアクションを許可すべきかについて慎重に考えます。 これらのアクションを実行するために必要な最小限の権限セットのみを付与します。 不必要に許容されない一連の権限を許可すると、統合でサブスクリプションに不要なアクションが実行される可能性があります。 を使用できます [権限ツール](endpoint-reference.md) 最小限の権限セットを決定します。 の完全なリストをご覧ください。 [権限](#permission_list).

## ユーザ

役割の作成後、「API のみ」のユーザーを作成する必要があります。 API 専用ユーザーは、他のユーザーによって管理され、Marketoへのログインに使用できないため、Marketoの特別なタイプのユーザーです。 API のみのユーザーは、次の場合があります。

- カスタムサービスの作成
- これらのサービスのスコープ権限
- REST API へのアクセス

>[!MORELIKETHIS]
>
>API のみのユーザーを作成するには、 **[!UICONTROL Admin]** > **[!UICONTROL ユーザーと役割]** > **[!UICONTROL ユーザー]** メニューとクリック [!UICONTROL 新しいユーザーを招待].


![新規ユーザー情報](assets/new-user-info.png)

使用するサービスとアプリケーションに基づいて、わかりやすい名前とメールアドレス（有効でない必要があります）をユーザーに指定します。 ダイアログメニューの必須フィールドに入力し、「API のみ」チェックボックスをクリックして、API 役割の 1 つをユーザーに付与します。 これにより、その役割の権限セットがユーザーに割り当てられます。

![新規ユーザー権限](assets/new-user-permissions.png)

最後に、「Send」をクリックして、API 専用ユーザーを作成します。

資格情報を含む新しいアプリケーションをプロビジョニングする場合は、別の既存の統合と同じ権限が設定されている場合でも、サービスの新しいユーザーを作成することを強く検討してください。 API 呼び出しの使用状況の統計とエラーはユーザーごとに追跡されるので、各アプリケーションにユーザーをプロビジョニングすると、使用状況と問題を特定のアプリケーションに分離するのに役立ちます。 これは、毎日の API 呼び出し制限に達する際の問題や、統合によって行われた API 呼び出しに起因するエラーが発生した場合に便利です。

## カスタムサービス

カスタムサービスは、Marketo インスタンスで認証を行うために必要な、実際の資格情報、クライアント ID およびクライアント秘密鍵を提供します。 プロビジョニングするには、 **[!UICONTROL Admin]** > **[!UICONTROL 統合]** > **[!UICONTROL LaunchPoint]** メニューから選択します。 **[!UICONTROL 新しいサービス]**.

サービスにわかりやすい名前を付け、「サービス」リストから「カスタム」を選択します。 サービスに詳細な説明を入力し、API のみのユーザーリストから適切なユーザーを選択して、をクリックします。 [!UICONTROL 作成].

![新規カスタムサービス](assets/admin-launchpoint-new-service.png)

これにより、LaunchPoint サービスのリストに新しいサービスが追加され、「詳細を表示」するオプションが追加されます。 「詳細を表示」をクリックすると、認証に必要なクライアント ID とクライアントシークレット、所有ユーザー、短期的なテストの目的でトークンを取得するオプションが表示されます。 このダイアログから取得するトークンの有効期間は、 [ID サービス](https://developer.adobe.com/marketo-apis/api/identity/#tag/Identity/operation/identityUsingGET) また、作成日から 3,600 秒間有効です。

![トークンを取得](assets/get-token.png)

## ワークスペースとパーティション

ワークスペースとパーティションを使用したサブスクリプションでは、特定のレコードまたはアセットにアクセスする機能は、ユーザーの役割が特定のワークスペースで持つ権限に基づいて付与されます。 各ワークスペースには、ワークスペースとパーティション メニューの 1 つ以上のパーティションへのアクセス権が付与され、リードは単一のパーティションに属します。 API のみのユーザーがワークスペース内のリードレコードの読み取りまたは書き込みにアクセスできる場合、そのワークスペースがアクセスできるパーティション内のすべてのレコードにアクセスできます。

アセットはワークスペースに属するので、アセットの読み取りや書き込みをおこなえるかどうかは、ユーザーが、ワークスペースでそのタイプのアセットレコードの読み取りや書き込みをおこなう権限を持つ、関連するワークスペースでの役割を持っているかどうかによって決まります。

## 権限リスト

以下は、API のみのユーザーが使用できるすべての権限と、その権限を持つユーザーに許可される操作のリストです。

| 役割の権限 | 以下へのアクセスを許可… |
| --- | --- |
| アセットの承認 | アセットの承認 |
| キャンペーンの実行 | キャンペーンのリクエストまたはスケジュール |
| 読み取り専用アクティビティ | リードアクティビティの取得 |
| 読み取り専用アクティビティメタデータ | リードアクティビティメタデータの取得 |
| 読み取り専用アセット | アセットの詳細の取得 |
| キャンペーン読み取り可 | キャンペーンの詳細を取得 |
| 企業読み取り可 | 会社の詳細を取得 |
| カスタムオブジェクト読み取り可 | カスタムオブジェクトの詳細の取得 |
| リード読み取り可 | リードの詳細を取得 |
| 読み取り専用重点顧客 | 指定されたアカウントの詳細の取得 |
| 読み出し専用重要顧客リスト | 名前付きアカウントリストの詳細の取得 |
| 商談読み取り可 | オポチュニティの詳細を取得 |
| セールス担当者読み取り可 | 販売担当者の詳細の取得 |
| 読み取り／書き込みアクティビティ | リードアクティビティの取得と作成 |
| 読み取り／書き込みアクティビティメタデータ | リードアクティビティメタデータの取得と作成 |
| 読み取り／書き込みアセット | アセットの取得、作成、更新 |
| 読み取り／書き込みキャンペーン | キャンペーンの取得、作成、更新 |
| 読み取り／書き込み企業 | 会社の取得、作成、更新 |
| 読み取り／書き込みカスタムオブジェクト | カスタムオブジェクトの取得、作成、更新 |
| リード読み取り/書き込み可 | リードの詳細情報の取得、作成、更新 |
| 読み取り／書き込み重点顧客 | 重点顧客の取得、作成、および更新 |
| 読み出し/書き込み重要顧客リスト | 名前付きアカウント リストの取得、作成、および更新 |
| 読み取り／書き込み商談 | オポチュニティの取得、作成、更新 |
| 読み取り／書き込みセールス担当者 | 販売担当者の取得、作成、および更新 |
